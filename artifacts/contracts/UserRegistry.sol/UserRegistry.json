{
  "_format": "hh-sol-artifact-1",
  "contractName": "UserRegistry",
  "sourceName": "contracts/UserRegistry.sol",
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "AlreadyRegistered",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "CannotUnlinkPrimary",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidAddress",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidKYCHash",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "KYCAlreadyUsed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "MaxWalletsReached",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotYourWallet",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "OwnableInvalidOwner",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "OwnableUnauthorizedAccount",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuardReentrantCall",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "UserNotFound",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "WalletNotLinked",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "oldPrimary",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newPrimary",
          "type": "address"
        }
      ],
      "name": "PrimaryWalletChanged",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "primaryWallet",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "UserRegistered",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "WalletLinked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "WalletUnlinked",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "MAX_LINKED_WALLETS",
      "outputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newPrimary",
          "type": "address"
        }
      ],
      "name": "changePrimaryWallet",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "emergencyUnlinkWallet",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "getAllWalletsForAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "primary",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "linked",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getMyWallets",
      "outputs": [
        {
          "internalType": "address",
          "name": "primary",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "linked",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        }
      ],
      "name": "getUserInfo",
      "outputs": [
        {
          "internalType": "bool",
          "name": "exists",
          "type": "bool"
        },
        {
          "internalType": "address",
          "name": "primaryWallet",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "linkedCount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "registeredAt",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        }
      ],
      "name": "getUserWallets",
      "outputs": [
        {
          "internalType": "address",
          "name": "primary",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "linked",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "isWalletRegistered",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "kycHashUsed",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "linkWallet",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        }
      ],
      "name": "registerUser",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalUsers",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "unlinkWallet",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "users",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "kycHash",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "primaryWallet",
          "type": "address"
        },
        {
          "internalType": "uint40",
          "name": "registeredAt",
          "type": "uint40"
        },
        {
          "internalType": "bool",
          "name": "exists",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "walletToKycHash",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x6080806040523461007e5733156100685760008054336001600160a01b03198216811783556040519290916001600160a01b0316907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09080a360018055610d4690816100848239f35b631e4fbdf760e01b815260006004820152602490fd5b600080fdfe608060408181526004908136101561001657600080fd5b600092833560e01c90816320e0ff4e14610a78575080632a004bb21461095b5780632dc032591461083f5780635027dbe2146106e1578063715018a61461068757806373968591146106695780637f247e491461062d5780638da5cb5b1461060557806393cff56a146105d9578063adff8b0f1461057a578063b8bb812614610454578063b96091bc146103eb578063bff1f9e1146103c8578063c063f9cb14610256578063cea6ab98146101fa578063d0feff77146101b4578063ea56639d1461017a5763f2fde38b146100ea57600080fd5b34610176576020366003190112610176576001600160a01b038235818116939192908490036101725761011b610ae3565b831561015c57505082546001600160a01b0319811683178455167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08380a380f35b51631e4fbdf760e01b8152908101849052602490fd5b8480fd5b8280fd5b50903461017657602036600319011261017657356001600160a01b0381169081900361017657828291602094526003845220549051908152f35b5090346101765760203660031901126101765735916001600160a01b03831683036101f757506101e66101f392610cc0565b9290915192839283610a93565b0390f35b80fd5b509034610176576020366003190112610176578160809360ff92358152600260205220805492600360018060a01b03600184015416920154918151948552602085015264ffffffffff82169084015260281c1615156060820152f35b509034610176576020366003190112610176576001600160a01b0391813583811692919083900361017257610289610ae3565b828552600380602052818620549283156103ba57948387526002602052828720906002889201915b8254808210156103885787836102c78487610b57565b905490881b1c16146102e257506102dd90610b0f565b6102b1565b90929394959697600019820191821161037557509261035e6020959361033f610363946103317fb62c9f91691ee2d4c9415555e3b869e10856d3ef60a4dd526513d7e8faee50519a9886610b57565b905490881b1c169184610b57565b90919082549060031b9160018060a01b03809116831b921b1916179055565b610b85565b8587528252858181205551428152a380f35b634e487b7160e01b8a5260119052602489fd5b505050507fb62c9f91691ee2d4c9415555e3b869e10856d3ef60a4dd526513d7e8faee50519293945090602091610363565b825163c5ff3d3360e01b8152fd5b8382346103e757816003193601126103e7576020906005549051908152f35b5080fd5b5091346101f75760203660031901126101f7578290823581526002602052209060ff600383015460281c1615610446575060018101546001600160a01b0316906101f39061043b90600201610bfa565b925192839283610a93565b82516319c29a3360e21b8152fd5b508290346103e7576020806003193601126101765783356001600160a01b0381169290919083830361017257610488610b34565b831561056b57338552600382528085205492831561055b5783865260028352600282872001805490600582101561054b57868852600385528388205461053b5768010000000000000000821015610528579161033f827f0eb13dd16c5777dda9f5627c39b1fa7a1cdb38c55c62e762422046508ac3c446969594600161051095018155610b57565b84865260038252838187205551428152a36001805580f35b634e487b7160e01b885260418952602488fd5b8351630ea075bf60e21b81528990fd5b835163f67adce760e01b81528990fd5b81516306c300d160e51b81528790fd5b5163e6c4247b60e01b81528590fd5b509034610176576020366003190112610176578160809364ffffffffff9235815260026020522091600383015490600260018060a01b036001860154169401549080519460ff8460281c16151586526020860152840152166060820152f35b50903461017657602036600319011261017657816020938260ff93358252855220541690519015158152f35b8382346103e757816003193601126103e757905490516001600160a01b039091168152602090f35b50903461017657602036600319011261017657356001600160a01b03811690819003610176578282916020945260038452205415159051908152f35b8382346103e757816003193601126103e7576101f3906101e6610c66565b83346101f757806003193601126101f7576106a0610ae3565b80546001600160a01b03198116825581906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b509034610176576020366003190112610176576001600160a01b0391813583811692919083900361017257610714610b34565b3385526003806020528186205492831561083157838752600260205282872095600196818882015416871461082157889188916002019083835b610796575b50505050156103ba57507fb62c9f91691ee2d4c9415555e3b869e10856d3ef60a4dd526513d7e8faee5051916020918588528252868181205551428152a3805580f35b82548082101561081b578a836107ac8487610b57565b9054908b1b1c16146107c857506107c290610b0f565b8361074e565b9294509250906000198101908111610808579161033f61035e926107f086956107fe97610b57565b905490891b1c169184610b57565b8586388080610753565b634e487b7160e01b8b526011855260248bfd5b50610753565b84516376dcc7eb60e11b81528390fd5b82516306c300d160e51b8152fd5b50903461017657602091826003193601126109575781359161085f610b34565b82156109495782855280845260ff828620541661093b57338552600384528185205461092d57907f721062b12bc7bbdfa151705433822995dfec164dc41489b260563c2c1bf6ee899183865260028552600382872085815560018101336bffffffffffffffffffffffff60a01b825416179055016501000000000064ffffffffff421665ffffffffffff19835416171790553386526003855283828720558386528452808520600160ff1982541617905561091b600554610b0f565b60055551924284523393a36001805580f35b9051630ea075bf60e21b8152fd5b9051635aabd3cd60e11b8152fd5b90516320ddf6e360e21b8152fd5b8380fd5b509034610176576020366003190112610176576001600160a01b03813581811693908490036101725761098c610b34565b8315610a69573385526003806020528186205493841561083157848752600260205282872090879388948960028501958654915b828110610a34575b50505015610a2757505060010180546001600160a01b03198116871790915590921692916109fc91849161033f9190610b57565b7f3493efb742b92985a2cc0bcab88ec957412f23e213fc8b9f8a441b63c187b4508480a46001805580f35b5163c5ff3d3360e01b8152fd5b8b8a610a40838b610b57565b905490851b1c1614610a5a57610a5590610b0f565b6109c0565b975050505060013880806109c8565b5163e6c4247b60e01b81529050fd5b8490346103e757816003193601126103e75780600560209252f35b6001600160a01b03918216815260406020808301829052845191830182905260609092019382019160005b828110610acd57505050505090565b8351851686529481019492810192600101610abe565b6000546001600160a01b03163303610af757565b60405163118cdaa760e01b8152336004820152602490fd5b6000198114610b1e5760010190565b634e487b7160e01b600052601160045260246000fd5b600260015414610b45576002600155565b604051633ee5aeb560e01b8152600490fd5b8054821015610b6f5760005260206000200190600090565b634e487b7160e01b600052603260045260246000fd5b80548015610bb2576000190190610b9c8282610b57565b81549060018060a01b039060031b1b1916905555565b634e487b7160e01b600052603160045260246000fd5b6020810190811067ffffffffffffffff821117610be457604052565b634e487b7160e01b600052604160045260246000fd5b906040519180548084526020908185019260005281600020916000905b828210610c465750505050829003601f01601f1916820167ffffffffffffffff811183821017610be457604052565b83546001600160a01b031685529384019360019384019390910190610c17565b6000338152600360205260408120548015610ca657815260026020819052604090912060018101546001600160a01b03169291610ca39101610bfa565b90565b509060405191610cb583610bc8565b808352803681379190565b6001600160a01b039081166000908152600360205260408120549192918015610d0157604082600292610ca394528260205220936001850154169301610bfa565b506040519250610cb583610bc856fea264697066735822122019b56b40db42395794cfc25872be94ac336e2d7428481b0aef8605f412a2cb2164736f6c63430008140033",
  "deployedBytecode": "0x608060408181526004908136101561001657600080fd5b600092833560e01c90816320e0ff4e14610a78575080632a004bb21461095b5780632dc032591461083f5780635027dbe2146106e1578063715018a61461068757806373968591146106695780637f247e491461062d5780638da5cb5b1461060557806393cff56a146105d9578063adff8b0f1461057a578063b8bb812614610454578063b96091bc146103eb578063bff1f9e1146103c8578063c063f9cb14610256578063cea6ab98146101fa578063d0feff77146101b4578063ea56639d1461017a5763f2fde38b146100ea57600080fd5b34610176576020366003190112610176576001600160a01b038235818116939192908490036101725761011b610ae3565b831561015c57505082546001600160a01b0319811683178455167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08380a380f35b51631e4fbdf760e01b8152908101849052602490fd5b8480fd5b8280fd5b50903461017657602036600319011261017657356001600160a01b0381169081900361017657828291602094526003845220549051908152f35b5090346101765760203660031901126101765735916001600160a01b03831683036101f757506101e66101f392610cc0565b9290915192839283610a93565b0390f35b80fd5b509034610176576020366003190112610176578160809360ff92358152600260205220805492600360018060a01b03600184015416920154918151948552602085015264ffffffffff82169084015260281c1615156060820152f35b509034610176576020366003190112610176576001600160a01b0391813583811692919083900361017257610289610ae3565b828552600380602052818620549283156103ba57948387526002602052828720906002889201915b8254808210156103885787836102c78487610b57565b905490881b1c16146102e257506102dd90610b0f565b6102b1565b90929394959697600019820191821161037557509261035e6020959361033f610363946103317fb62c9f91691ee2d4c9415555e3b869e10856d3ef60a4dd526513d7e8faee50519a9886610b57565b905490881b1c169184610b57565b90919082549060031b9160018060a01b03809116831b921b1916179055565b610b85565b8587528252858181205551428152a380f35b634e487b7160e01b8a5260119052602489fd5b505050507fb62c9f91691ee2d4c9415555e3b869e10856d3ef60a4dd526513d7e8faee50519293945090602091610363565b825163c5ff3d3360e01b8152fd5b8382346103e757816003193601126103e7576020906005549051908152f35b5080fd5b5091346101f75760203660031901126101f7578290823581526002602052209060ff600383015460281c1615610446575060018101546001600160a01b0316906101f39061043b90600201610bfa565b925192839283610a93565b82516319c29a3360e21b8152fd5b508290346103e7576020806003193601126101765783356001600160a01b0381169290919083830361017257610488610b34565b831561056b57338552600382528085205492831561055b5783865260028352600282872001805490600582101561054b57868852600385528388205461053b5768010000000000000000821015610528579161033f827f0eb13dd16c5777dda9f5627c39b1fa7a1cdb38c55c62e762422046508ac3c446969594600161051095018155610b57565b84865260038252838187205551428152a36001805580f35b634e487b7160e01b885260418952602488fd5b8351630ea075bf60e21b81528990fd5b835163f67adce760e01b81528990fd5b81516306c300d160e51b81528790fd5b5163e6c4247b60e01b81528590fd5b509034610176576020366003190112610176578160809364ffffffffff9235815260026020522091600383015490600260018060a01b036001860154169401549080519460ff8460281c16151586526020860152840152166060820152f35b50903461017657602036600319011261017657816020938260ff93358252855220541690519015158152f35b8382346103e757816003193601126103e757905490516001600160a01b039091168152602090f35b50903461017657602036600319011261017657356001600160a01b03811690819003610176578282916020945260038452205415159051908152f35b8382346103e757816003193601126103e7576101f3906101e6610c66565b83346101f757806003193601126101f7576106a0610ae3565b80546001600160a01b03198116825581906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b509034610176576020366003190112610176576001600160a01b0391813583811692919083900361017257610714610b34565b3385526003806020528186205492831561083157838752600260205282872095600196818882015416871461082157889188916002019083835b610796575b50505050156103ba57507fb62c9f91691ee2d4c9415555e3b869e10856d3ef60a4dd526513d7e8faee5051916020918588528252868181205551428152a3805580f35b82548082101561081b578a836107ac8487610b57565b9054908b1b1c16146107c857506107c290610b0f565b8361074e565b9294509250906000198101908111610808579161033f61035e926107f086956107fe97610b57565b905490891b1c169184610b57565b8586388080610753565b634e487b7160e01b8b526011855260248bfd5b50610753565b84516376dcc7eb60e11b81528390fd5b82516306c300d160e51b8152fd5b50903461017657602091826003193601126109575781359161085f610b34565b82156109495782855280845260ff828620541661093b57338552600384528185205461092d57907f721062b12bc7bbdfa151705433822995dfec164dc41489b260563c2c1bf6ee899183865260028552600382872085815560018101336bffffffffffffffffffffffff60a01b825416179055016501000000000064ffffffffff421665ffffffffffff19835416171790553386526003855283828720558386528452808520600160ff1982541617905561091b600554610b0f565b60055551924284523393a36001805580f35b9051630ea075bf60e21b8152fd5b9051635aabd3cd60e11b8152fd5b90516320ddf6e360e21b8152fd5b8380fd5b509034610176576020366003190112610176576001600160a01b03813581811693908490036101725761098c610b34565b8315610a69573385526003806020528186205493841561083157848752600260205282872090879388948960028501958654915b828110610a34575b50505015610a2757505060010180546001600160a01b03198116871790915590921692916109fc91849161033f9190610b57565b7f3493efb742b92985a2cc0bcab88ec957412f23e213fc8b9f8a441b63c187b4508480a46001805580f35b5163c5ff3d3360e01b8152fd5b8b8a610a40838b610b57565b905490851b1c1614610a5a57610a5590610b0f565b6109c0565b975050505060013880806109c8565b5163e6c4247b60e01b81529050fd5b8490346103e757816003193601126103e75780600560209252f35b6001600160a01b03918216815260406020808301829052845191830182905260609092019382019160005b828110610acd57505050505090565b8351851686529481019492810192600101610abe565b6000546001600160a01b03163303610af757565b60405163118cdaa760e01b8152336004820152602490fd5b6000198114610b1e5760010190565b634e487b7160e01b600052601160045260246000fd5b600260015414610b45576002600155565b604051633ee5aeb560e01b8152600490fd5b8054821015610b6f5760005260206000200190600090565b634e487b7160e01b600052603260045260246000fd5b80548015610bb2576000190190610b9c8282610b57565b81549060018060a01b039060031b1b1916905555565b634e487b7160e01b600052603160045260246000fd5b6020810190811067ffffffffffffffff821117610be457604052565b634e487b7160e01b600052604160045260246000fd5b906040519180548084526020908185019260005281600020916000905b828210610c465750505050829003601f01601f1916820167ffffffffffffffff811183821017610be457604052565b83546001600160a01b031685529384019360019384019390910190610c17565b6000338152600360205260408120548015610ca657815260026020819052604090912060018101546001600160a01b03169291610ca39101610bfa565b90565b509060405191610cb583610bc8565b808352803681379190565b6001600160a01b039081166000908152600360205260408120549192918015610d0157604082600292610ca394528260205220936001850154169301610bfa565b506040519250610cb583610bc856fea264697066735822122019b56b40db42395794cfc25872be94ac336e2d7428481b0aef8605f412a2cb2164736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
